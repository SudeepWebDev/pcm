<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Communication System- Demo and Presentation</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
        }
        header {
            background-color: #004080;
            color: white;
            padding: 1rem;
            text-align: center;
        }
        main {
            padding: 1rem;
        }
        section {
            margin-bottom: 3rem;
        }
        iframe {
            width: 100%;
            height: 500px;
            border: none;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .controls {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        label {
            display: flex;
            flex-direction: column;
            font-weight: bold;
            color: #004080;
        }
        input[type=range] {
            width: 100%;
        }
        .demo-panel {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            max-width: 800px;
            margin: auto;
        }
        canvas {
            width: 100% !important;
            height: 320px !important;
        }
        ul {
            margin-top: 10px;
        }
        .math-section, .example-section {
            background: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            margin: 30px 0;
        }
        .presentation-link {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            padding: 30px;
            text-align: center;
            margin: 20px 0;
        }
        .canva-button {
            display: inline-block;
            background-color: #00C4CC;
            color: white;
            font-weight: bold;
            padding: 15px 30px;
            border-radius: 30px;
            text-decoration: none;
            font-size: 1.2rem;
            margin-top: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .canva-button:hover {
            background-color: #00A4AC;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        /* Hamburger Menu Styles */
        .nav-toggle {
            position: fixed;
            top: 15px;
            right: 15px;
            z-index: 1000;
            padding: 10px;
            background: rgba(0, 64, 128, 0.8);
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 24px;
            width: 30px;
        }
        
        .nav-toggle span {
            display: block;
            width: 100%;
            height: 3px;
            background: white;
            transition: all 0.3s ease;
        }
        
        .nav-toggle.active span:nth-child(1) {
            transform: translateY(10px) rotate(45deg);
        }
        
        .nav-toggle.active span:nth-child(2) {
            opacity: 0;
        }
        
        .nav-toggle.active span:nth-child(3) {
            transform: translateY(-10px) rotate(-45deg);
        }
        
        .side-nav {
            position: fixed;
            top: 0;
            right: -300px;
            width: 280px;
            height: 100%;
            background: #004080;
            z-index: 999;
            box-shadow: -2px 0 5px rgba(0, 0, 0, 0.2);
            transition: right 0.3s ease;
            padding-top: 70px;
        }
        
        .side-nav.active {
            right: 0;
        }
        
        .side-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .side-nav ul li {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .side-nav ul li a {
            display: block;
            padding: 15px 20px;
            color: white;
            text-decoration: none;
            font-weight: bold;
            transition: background 0.3s;
        }
        
        .side-nav ul li a:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 998;
        }
        
        @media (min-width: 992px) {
            .nav-toggle {
                display: none;
            }
        }
        .real-time-calcs {
            margin-top: 30px;
            border-top: 1px dashed #aaa;
            padding-top: 20px;
        }
        .calculation-box {
            background-color: #f0f8ff;
            padding: 15px 20px;
            border-radius: 8px;
            border-left: 4px solid #004080;
        }
        .calculation-box strong {
            color: #004080;
        }
        .calculation-box .math-formula {
            background-color: #fff;
        }
        #calcCarrierFreq, #calcPilotFreq, #calcMsgFreq,
        #eqMsgFreq, #eqMsgFreq2, #eqMsgFreq3, 
        #eqCarrierFreq, #eqCarrierFreq2, #eqPilotFreq,
        #powerEfficiency, #powerRatio, #msgBandwidth,
        #pilotComponents, #noPilotComponents {
            font-weight: bold;
            color: #d04000;
            transition: background-color 0.3s;
            padding: 2px 4px;
        }
        .highlight {
            background-color: #fffacd;
        }
    </style>
</head>
<body>

<!-- Hamburger menu toggle button -->
<div class="nav-toggle" id="navToggle">
    <span></span>
    <span></span>
    <span></span>
</div>

<!-- Overlay for when menu is open -->
<div class="overlay" id="overlay"></div>

<!-- Side navigation menu -->
<nav class="side-nav" id="sideNav">
    <ul>
        <li><a href="#presentationSection">Presentation</a></li>
        <li><a href="#demoPanel">Interactive Demo</a></li>
        <li><a href="#exampleSection">FM Radio Example</a></li>
        <li><a href="#mathSection">Mathematical Model</a></li>
        <li><a href="#quizSection">Knowledge Quiz</a></li>
        <li><a href="#referencesSection">References</a></li>
    </ul>
</nav>

<header>
    <h1>Commnuication System</h1>
    <p>Presentation and Interactive Demo</p>
    <div style="margin-top:1rem;display:flex;gap:1rem;align-items:center;justify-content:center;flex-wrap:wrap;">
        <label for="topicFilter" style="font-weight:bold;color:#004080;">Filter by Topic:</label>
        <select id="topicFilter" style="padding:4px 10px;border-radius:5px;border:1px solid #bbb;">
            <option value="all">All</option>
            <option value="modulation">Modulation</option>
            <option value="quantization">Quantization</option>
            <option value="quiz">Quiz</option>
            <option value="math">Mathematics</option>
            <option value="references">References</option>
        </select>
    </div>
</header>

<main>
    <section id="presentationSection">
        <h2>Presentation (from Canva)</h2>
        <!-- Canva iframe with fallback -->
        <div id="canvaContainer" style="position: relative; width: 100%; height: 0; padding-top: 56.2500%;
        padding-bottom: 0; box-shadow: 0 2px 8px 0 rgba(63,69,81,0.16); margin-top: 1.6em; margin-bottom: 0.9em; overflow: hidden;
        border-radius: 8px; will-change: transform;">
         <iframe id="canvaFrame" loading="lazy" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; border: none; padding: 0;margin: 0;"
           src="https://www.canva.com/design/DAGlRwL0oaE/_ZFLKVZBI8cRKGKePoQhLw/view?embed" allowfullscreen="allowfullscreen" allow="fullscreen">
         </iframe>
       </div>
       
       <!-- Fallback that will be shown if iframe fails to load -->
       <div id="canvaFallback" class="presentation-link" style="display: none;">
           <p>The embedded presentation couldn't be loaded due to Content Security Policy restrictions.</p>
           <p>Please click the button below to view the presentation in a new tab:</p>
           <a href="https://www.canva.com/design/DAGlRwL0oaE/_ZFLKVZBI8cRKGKePoQhLw/view" target="_blank" class="canva-button">
               View Presentation
           </a>
       </div>
       
       <a href="https:&#x2F;&#x2F;www.canva.com&#x2F;design&#x2F;DAGlRwL0oaE&#x2F;_ZFLKVZBI8cRKGKePoQhLw&#x2F;view?utm_content=DAGlRwL0oaE&amp;utm_campaign=designshare&amp;utm_medium=embeds&amp;utm_source=link" target="_blank" rel="noopener">Pilot Carrier Modulation</a> by SUDEEP SINGH
    </section>
    <section id="presentationSection2">
        <h2>Presentation (from Canva)</h2>
        <!-- Canva iframe with fallback -->
        <div style="position: relative; width: 100%; height: 0; padding-top: 56.2500%;
 padding-bottom: 0; box-shadow: 0 2px 8px 0 rgba(63,69,81,0.16); margin-top: 1.6em; margin-bottom: 0.9em; overflow: hidden;
 border-radius: 8px; will-change: transform;">
  <iframe loading="lazy" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; border: none; padding: 0;margin: 0;"
    src="https://www.canva.com/design/DAGleyD_O2I/NiKVxqRKJh11ulJKbcFJhA/view?embed" allowfullscreen="allowfullscreen" allow="fullscreen">
  </iframe>
</div>
<a href="https:&#x2F;&#x2F;www.canva.com&#x2F;design&#x2F;DAGleyD_O2I&#x2F;NiKVxqRKJh11ulJKbcFJhA&#x2F;view?utm_content=DAGleyD_O2I&amp;utm_campaign=designshare&amp;utm_medium=embeds&amp;utm_source=link" target="_blank" rel="noopener">Quantization noise</a> by Shubham Kushwaha
    </section>

    <section>
        <div class="demo-panel" id="demoPanel">
            <h2 style="color:#1a4e8a;">Interactive Pilot Carrier Modulation Demo</h2>
            <div class="controls">
                <label>
                    Carrier Frequency (Hz):
                    <input type="range" id="carrierFreq" min="100" max="2000" value="1000">
                    <span id="carrierFreqVal">1000</span>
                </label>
                <label>
                    Pilot Frequency (Hz):
                    <input type="range" id="pilotFreq" min="10" max="500" value="100">
                    <span id="pilotFreqVal">100</span>
                </label>
                <label>
                    Message Frequency (Hz):
                    <input type="range" id="msgFreq" min="1" max="100" value="10">
                    <span id="msgFreqVal">10</span>
                </label>
                <label>
                    Quantization Bits:
                    <input type="range" id="quantBits" min="2" max="10" value="4">
                    <span id="quantBitsVal">4</span>
                </label>
            </div>
            <canvas id="modulationChart"></canvas>
            <canvas id="modulationChartNoPilot" style="margin-top:30px;"></canvas>
            <canvas id="quantizationChart" style="margin-top:30px;"></canvas>
            <div style="margin-top:18px;color:#1a4e8a;font-size:1.05rem;">
                <b>How to use:</b> Move the sliders to change the carrier, pilot, message frequencies, and quantization bits.<br>
                The charts update in real time to show modulation <i>with</i> and <i>without</i> pilot carrier, and quantization noise.
            </div>
        </div>
    </section>

    <section class="example-section" id="exampleSection">
        <h2>Real Example: FM Radio Transmission</h2>
        <p>In FM radio broadcasting, a pilot tone at 19 kHz is transmitted alongside the main stereo signal to help receivers decode the left and right audio channels. The carrier frequency might be around 100 MHz for FM radio, while message signals (audio) range from 20 Hz to 15 kHz.</p>
        <p><b>Example Parameters:</b>
        <ul>
            <li>Carrier Frequency (fc) ≈ 1000 Hz (scaled down for demo)</li>
            <li>Pilot Frequency (fp) ≈ 100 Hz</li>
            <li>Message Frequency (fm) ≈ 10 Hz</li>
        </ul>
        </p>
        <p>This example shows how a pilot signal is essential for synchronization and signal demodulation in real-world applications like FM broadcasting.</p>
    </section>

    <section class="math-section" id="mathSection">
        <h2>Mathematical Model Verification</h2>
        <p>The modulated signal <b>with pilot</b> is given by:</p>
        <p style="font-family:monospace;">s(t) = (1 + m(t)) × cos(2πf<sub>c</sub>t) + 0.2 × cos(2πf<sub>p</sub>t)</p>
        <p>where <i>m(t)</i> = sin(2πf<sub>m</sub>t)</p>

        <p>Without the pilot, the modulated signal simplifies to:</p>
        <p style="font-family:monospace;">s(t) = (1 + m(t)) × cos(2πf<sub>c</sub>t)</p>

        <p>✅ Our simulation plots follow these formulas correctly:</p>
        <ul>
            <li>"With Pilot" includes an extra sinusoidal component at pilot frequency.</li>
            <li>"Without Pilot" shows only the message-modulated carrier.</li>
        </ul>

        <!-- Accordion for Proof -->
        <div class="accordion">
            <button class="accordion-button">Proof, Power Efficiency, and Bandwidth Analysis</button>
            <div class="accordion-content">
                <h3>Proof of the Equation</h3>
                <p>The modulated signal with a pilot carrier is:</p>
                <p style="font-family:monospace;">s(t) = (1 + m(t)) × cos(2πf<sub>c</sub>t) + 0.2 × cos(2πf<sub>p</sub>t)</p>
                <p>Substituting <i>m(t)</i> = sin(2πf<sub>m</sub>t):</p>
                <p style="font-family:monospace;">s(t) = (1 + sin(2πf<sub>m</sub>t)) × cos(2πf<sub>c</sub>t) + 0.2 × cos(2πf<sub>p</sub>t)</p>
                <p>Expanding:</p>
                <p style="font-family:monospace;">s(t) = cos(2πf<sub>c</sub>t) + sin(2πf<sub>m</sub>t) × cos(2πf<sub>c</sub>t) + 0.2 × cos(2πf<sub>p</sub>t)</p>
                <p>The first term is the carrier, the second term is the message-modulated carrier, and the third term is the pilot carrier.</p>

                <h3>Why Include the Pilot Carrier?</h3>
                <p>The pilot carrier term <b>+ 0.2 × cos(2πf<sub>p</sub>t)</b> serves as a frequency reference for demodulation. It is attenuated (scaled by 0.2) to minimize interference with the main signal while still being detectable by the receiver.</p>
                <p>In Single Sideband (SSB) systems, the pilot carrier helps the receiver reconstruct the suppressed carrier for coherent demodulation. Without it, the receiver would struggle to decode the signal accurately.</p>
                <p>The attenuation factor (0.2) corresponds to a 16 dB reduction in power, ensuring the pilot carrier does not dominate the transmitted power.</p>

                <h3>Power Efficiency</h3>
                <p>The total transmitted power is the sum of the power in the carrier, sidebands, and pilot:</p>
                <p style="font-family:monospace;">P<sub>t</sub> = P<sub>carrier</sub> + P<sub>sidebands</sub> + P<sub>pilot</sub></p>
                <p>For a pilot attenuated by 16 dB:</p>
                <p style="font-family:monospace;">P<sub>pilot</sub> = P<sub>sidebands</sub> × 10<sup>-16/10</sup> ≈ 0.025 × P<sub>sidebands</sub></p>
                <p>Total power:</p>
                <p style="font-family:monospace;">P<sub>t</sub> = P<sub>sidebands</sub> (1 + 0.025)</p>
                <p>Power efficiency:</p>
                <p style="font-family:monospace;">η = P<sub>sidebands</sub> / P<sub>t</sub> = 1 / (1 + 0.025) ≈ 97.6%</p>

                <h3>Bandwidth Analysis</h3>
                <p>The bandwidth of the modulated signal is determined by the highest frequency component:</p>
                <ul>
                    <li>Without pilot: Bandwidth = 2 × f<sub>m</sub> (message bandwidth)</li>
                    <li>With pilot: Bandwidth = 2 × f<sub>m</sub> + negligible pilot bandwidth</li>
                </ul>
                <p>Thus, the pilot carrier adds minimal bandwidth overhead.</p>
            </div>
        </div>
    </section>

   <!-- Quiz Section -->
    <section class="quiz-section topic-quiz" id="quizSection">
        <h2>Test Your Knowledge: Modulation & Pilot Carrier</h2>
        <div class="quiz-container">
            <div class="quiz-item">
                <p><strong>1. What is the main purpose of including a pilot carrier in SSB?</strong></p>
                <div class="quiz-options">
                    <div class="option" data-correct="false">To increase transmission power</div>
                    <div class="option" data-correct="true">To provide a frequency reference for demodulation</div>
                    <div class="option" data-correct="false">To boost audio quality</div>
                    <div class="option" data-correct="false">To increase bandwidth</div>
                </div>
                <div class="feedback"></div>
            </div>
            
            <div class="quiz-item">
                <p><strong>2. By how much is the pilot carrier typically attenuated compared to full carrier?</strong></p>
                <div class="quiz-options">
                    <div class="option" data-correct="false">3-6 dB</div>
                    <div class="option" data-correct="false">8-12 dB</div>
                    <div class="option" data-correct="true">16-26 dB</div>
                    <div class="option" data-correct="false">30-40 dB</div>
                </div>
                <div class="feedback"></div>
            </div>
            
            <div class="quiz-item">
                <p><strong>3. What's the typical power efficiency of a pilot-carrier SSB system?</strong></p>
                <div class="quiz-options">
                    <div class="option" data-correct="false">33%</div>
                    <div class="option" data-correct="false">50%</div>
                    <div class="option" data-correct="false">75%</div>
                    <div class="option" data-correct="true">97-99%</div>
                </div>
                <div class="feedback"></div>
            </div>
            
            <div class="quiz-item">
                <p><strong>4. Which system uses half the bandwidth of conventional AM?</strong></p>
                <div class="quiz-options">
                    <div class="option" data-correct="true">Pilot-Carrier SSB</div>
                    <div class="option" data-correct="false">Double-sideband AM</div>
                    <div class="option" data-correct="false">FM</div>
                    <div class="option" data-correct="false">PM</div>
                </div>
                <div class="feedback"></div>
            </div>
        </div>
    </section>
    <section class="quiz-section topic-quiz" id="quantQuizSection">
        <h2>Test Your Knowledge: Quantization Noise</h2>
        <div class="quiz-container">
            <div class="quiz-item">
                <p><strong>1. What is quantization noise?</strong></p>
                <div class="quiz-options">
                    <div class="option" data-correct="true">The error between the analog value and its quantized digital value</div>
                    <div class="option" data-correct="false">Random noise from the environment</div>
                    <div class="option" data-correct="false">Noise added by the carrier signal</div>
                    <div class="option" data-correct="false">Interference from other channels</div>
                </div>
                <div class="feedback"></div>
            </div>
            <div class="quiz-item">
                <p><strong>2. How can quantization noise be reduced?</strong></p>
                <div class="quiz-options">
                    <div class="option" data-correct="false">By lowering the carrier frequency</div>
                    <div class="option" data-correct="true">By increasing the number of quantization bits</div>
                    <div class="option" data-correct="false">By adding a pilot signal</div>
                    <div class="option" data-correct="false">By using AM instead of FM</div>
                </div>
                <div class="feedback"></div>
            </div>
            <div class="quiz-item">
                <p><strong>3. Quantization noise is:</strong></p>
                <div class="quiz-options">
                    <div class="option" data-correct="false">Always zero</div>
                    <div class="option" data-correct="false">Unrelated to bit depth</div>
                    <div class="option" data-correct="true">Inversely related to the number of quantization levels</div>
                    <div class="option" data-correct="false">Maximum when using 16 bits</div>
                </div>
                <div class="feedback"></div>
            </div>
        </div>
    </section>

    <!-- References Section -->
    <section class="references-section" id="referencesSection">
        <h2>References</h2>
        <div class="content-block">
            <ol class="reference-list">
                <li>Proakis, John G., <em>Digital Communications</em>, McGraw Hill, 5th Edition, 2008.</li>
                <li>Haykin, Simon, <em>Communication Systems</em>, 5th Edition, Wiley, 2013.</li>
                <li>Lathi, B. P., <em>Modern Digital and Analog Communication Systems</em>, Oxford University Press, 4th Edition, 2009.</li>
                <li>Stremler, Ferrel G., <em>Introduction to Communication Systems</em>, 3rd Edition, Addison-Wesley, 1990.</li>
            </ol>
            <p class="citation-note">The technical content on Pilot Carrier Modulation presented in this document draws from these authoritative sources in the field of communications engineering.</p>
        </div>
    </section>
</main>

<style>
    /* Additional styles for new sections */
    .technical-section {
        background: #ffffff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        margin: 30px 0;
    }
    
    .content-block {
        margin-bottom: 25px;
    }
    
    .math-formula {
        background-color: #f8f9fa;
        padding: 10px 15px;
        border-left: 4px solid #004080;
        margin: 15px 0;
        font-family: 'Times New Roman', Times, serif;
    }
    
    .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 15px 0;
    }
    
    .comparison-table th, .comparison-table td {
        border: 1px solid #ddd;
        padding: 8px 12px;
        text-align: left;
    }
    
    .comparison-table th {
        background-color: #f2f2f2;
    }
    
    .comparison-table tr:nth-child(even) {
        background-color: #f9f9f9;
    }
    
    /* Quiz Styles */
    .quiz-section {
        background: #ffffff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        margin: 30px 0;
    }
    
    .quiz-container {
        max-width: 800px;
        margin: 0 auto;
    }
    
    .quiz-item {
        margin-bottom: 25px;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 15px;
        background-color: #f9f9f9;
    }
    
    .quiz-options {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-top: 10px;
    }
    
    .option {
        padding: 10px 15px;
        background-color: #e9ecef;
        border: 1px solid #ced4da;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .option:hover {
        background-color: #dee2e6;
    }
    
    .option.selected {
        background-color: #b8daff;
        border-color: #7abaff;
    }
    
    .option.correct {
        background-color: #d4edda;
        border-color: #c3e6cb;
        color: #155724;
    }
    
    .option.incorrect {
        background-color: #f8d7da;
        border-color: #f5c6cb;
        color: #721c24;
    }
    
    .feedback {
        margin-top: 10px;
        padding: 8px 0;
        font-weight: bold;
        min-height: 20px;
    }
    
    .feedback.correct {
        color: #155724;
    }
    
    .feedback.incorrect {
        color: #721c24;
    }
    
    /* Reference Styles */
    .references-section {
        background: #ffffff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        margin: 30px 0;
    }
    
    .reference-list {
        padding-left: 25px;
        line-height: 1.6;
    }
    
    .reference-list li {
        margin-bottom: 10px;
        color: #333;
    }
    
    .reference-list em {
        font-style: italic;
    }
    
    .citation-note {
        margin-top: 20px;
        font-style: italic;
        color: #555;
        border-top: 1px solid #eee;
        padding-top: 15px;
    }
    
    /* Footer Styles */
    .attribution-footer {
        background-color: #004080;
        color: white;
        padding: 2rem;
        margin-top: 3rem;
    }
    
    .attribution-container {
        max-width: 1000px;
        margin: 0 auto;
        display: flex;
        justify-content: space-around;
        flex-wrap: wrap;
    }
    
    .attribution-section {
        padding: 1rem;
        min-width: 250px;
    }
    
    .attribution-section h3 {
        margin-top: 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        padding-bottom: 10px;
    }
    
    .attribution-section p {
        margin: 5px 0;
    }
    
    @media (max-width: 600px) {
        .attribution-container {
            flex-direction: column;
        }
        
        .attribution-section {
            text-align: center;
        }
    }

    /* Accordion Styles */
    .accordion {
        margin-top: 20px;
    }

    .accordion-button {
        background-color: #004080;
        color: white;
        padding: 10px 15px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        text-align: left;
        width: 100%;
        font-size: 1rem;
        transition: background-color 0.3s;
    }

    .accordion-button:hover {
        background-color: #003060;
    }

    .accordion-content {
        display: none;
        padding: 15px;
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        border-radius: 5px;
        margin-top: 10px;
    }

    .accordion-content h3 {
        margin-top: 0;
    }

    .accordion-content p {
        margin: 10px 0;
    }

    .accordion-content ul {
        margin: 10px 0;
        padding-left: 20px;
    }

    /* Responsive Accordion */
    @media (max-width: 600px) {
        .accordion-button {
            font-size: 0.9rem;
            padding: 8px 12px;
        }

        .accordion-content {
            padding: 10px;
        }
    }
</style>

<!-- Footer with attribution -->
<footer class="attribution-footer">
    <div class="attribution-container">
        <div class="attribution-section">
            <h3>Created By</h3>
            <p>Sudeep Kumar Singh</p>
            <p>22/28021</p>
            <p>Paper: Communication System</p>
            <p>Bsc Computer Science Hons</p>
            <p>Atma Ram Santan Dharma College, DU</p>
        </div>
        <div class="attribution-section">
            <h3>Created By</h3>
            <p>Shubham Kushwaha</p>
            <p>22/28090</p>
            <p>Paper: Communication System</p>
            <p>Bsc Computer Science Hons</p>
            <p>Atma Ram Santan Dharma College, DU</p>
        </div>
        <div class="attribution-section">
            <h3>Submitted to</h3>
            <p>Dr. Nisha Jha</p>
            <p>Department of Electronics</p>
            <p>Atma Ram Santan Dharma College</p>
            <p>University of Delhi</p>
        </div>
    </div>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Hamburger menu functionality
        const navToggle = document.getElementById('navToggle');
        const sideNav = document.getElementById('sideNav');
        const overlay = document.getElementById('overlay');
        
        navToggle.addEventListener('click', toggleNav);
        overlay.addEventListener('click', closeNav);
        
        // Close menu when clicking a nav link (for better mobile UX)
        document.querySelectorAll('.side-nav a').forEach(link => {
            link.addEventListener('click', closeNav);
        });
        
        function toggleNav() {
            navToggle.classList.toggle('active');
            sideNav.classList.toggle('active');
            
            if (sideNav.classList.contains('active')) {
                document.body.style.overflow = 'hidden'; // Prevent scrolling while menu is open
                overlay.style.display = 'block';
            } else {
                closeNav();
            }
        }
        
        function closeNav() {
            navToggle.classList.remove('active');
            sideNav.classList.remove('active');
            document.body.style.overflow = '';
            overlay.style.display = 'none';
        }
        
        // Check if Canva iframe loads properly
        const canvaFrame = document.getElementById('canvaFrame');
        const canvaFallback = document.getElementById('canvaFallback');
        const canvaContainer = document.getElementById('canvaContainer');
        
        // Set a timeout to check if iframe loaded
        setTimeout(function() {
            try {
                // Try to access iframe content - this will fail if CSP blocks it
                const frameContent = canvaFrame.contentWindow || canvaFrame.contentDocument;
                if (!frameContent) {
                    showFallback();
                }
            } catch (e) {
                // If any error occurs, show fallback
                showFallback();
            }
        }, 3000); // Check after 3 seconds
        
        // Also listen for iframe load errors
        canvaFrame.onerror = showFallback;
        
        function showFallback() {
            canvaContainer.style.display = 'none';
            canvaFallback.style.display = 'block';
        }
        
        // Existing code for the demo functionality
        const carrierFreq = document.getElementById('carrierFreq');
        const pilotFreq = document.getElementById('pilotFreq');
        const msgFreq = document.getElementById('msgFreq');
        const quantBits = document.getElementById('quantBits');
        const carrierFreqVal = document.getElementById('carrierFreqVal');
        const pilotFreqVal = document.getElementById('pilotFreqVal');
        const msgFreqVal = document.getElementById('msgFreqVal');
        const quantBitsVal = document.getElementById('quantBitsVal');
const calcElements = {
            carrierFreq: document.getElementById('calcCarrierFreq'),
            pilotFreq: document.getElementById('calcPilotFreq'),
            msgFreq: document.getElementById('calcMsgFreq'),
            eqMsgFreq: document.getElementById('eqMsgFreq'),
            eqMsgFreq2: document.getElementById('eqMsgFreq2'),
            eqMsgFreq3: document.getElementById('eqMsgFreq3'),
            eqCarrierFreq: document.getElementById('eqCarrierFreq'),
            eqCarrierFreq2: document.getElementById('eqCarrierFreq2'),
            eqPilotFreq: document.getElementById('eqPilotFreq'),
            powerEfficiency: document.getElementById('powerEfficiency'),
            powerRatio: document.getElementById('powerRatio'),
            msgBandwidth: document.getElementById('msgBandwidth'),
            pilotComponents: document.getElementById('pilotComponents'),
            noPilotComponents: document.getElementById('noPilotComponents')
        };
        function updateLabels() {
            carrierFreqVal.textContent = carrierFreq.value;
            pilotFreqVal.textContent = pilotFreq.value;
            msgFreqVal.textContent = msgFreq.value;
            quantBitsVal.textContent = quantBits.value;
            updateMathCalculations();
        }
        function updateMathCalculations() {
            const fc = parseInt(carrierFreq.value);
            const fp = parseInt(pilotFreq.value);
            const fm = parseInt(msgFreq.value);
            updateWithHighlight(calcElements.carrierFreq, fc);
            updateWithHighlight(calcElements.pilotFreq, fp);
            updateWithHighlight(calcElements.msgFreq, fm);
            updateWithHighlight(calcElements.eqCarrierFreq, fc);
            updateWithHighlight(calcElements.eqCarrierFreq2, fc);
            updateWithHighlight(calcElements.eqPilotFreq, fp);
            updateWithHighlight(calcElements.eqMsgFreq, fm);
            updateWithHighlight(calcElements.eqMsgFreq2, fm);
            updateWithHighlight(calcElements.eqMsgFreq3, fm);
            const powerRatio = Math.round(Math.pow(10, 16/10));
            const efficiency = (1 / (1 + 1/powerRatio) * 100).toFixed(1);
            updateWithHighlight(calcElements.powerEfficiency, efficiency);
            updateWithHighlight(calcElements.powerRatio, powerRatio);
            updateWithHighlight(calcElements.msgBandwidth, fm);
            updateWithHighlight(calcElements.pilotComponents, `${fc} ± ${fm} Hz, ${fp} Hz`);
            updateWithHighlight(calcElements.noPilotComponents, `${fc} ± ${fm} Hz`);
        }
        function updateWithHighlight(element, value) {
            if (element) {
                if (element.textContent != value) {
                    element.textContent = value;
                    element.classList.add('highlight');
                    setTimeout(() => {
                        element.classList.remove('highlight');
                    }, 1000);
                }
            }
        }
        function quantizeSignal(signal, bits) {
            const levels = Math.pow(2, bits);
            const min = Math.min(...signal);
            const max = Math.max(...signal);
            const step = (max - min) / (levels - 1);
            return signal.map(x => {
                const q = Math.round((x - min) / step) * step + min;
                return q;
            });
        }
        function generateSignals() {
            const fs = 10000; // sample rate
            const t = [];
            const N = 1000;
            for (let i = 0; i < N; i++) t.push(i / fs);

            const fc = parseFloat(carrierFreq.value);
            const fp = parseFloat(pilotFreq.value);
            const fm = parseFloat(msgFreq.value);
            const bits = parseInt(quantBits.value);

            const msg = t.map(time => Math.sin(2 * Math.PI * fm * time));
            const quantMsg = quantizeSignal(msg, bits);
            const quantNoise = msg.map((v, i) => quantMsg[i] - v);
            const carrier = t.map(time => Math.cos(2 * Math.PI * fc * time));
            const pilot = t.map(time => 0.2 * Math.cos(2 * Math.PI * fp * time));

            const modulatedWithPilot = t.map((time, i) => (1 + msg[i]) * carrier[i] + pilot[i]);
            const modulatedWithoutPilot = t.map((time, i) => (1 + msg[i]) * carrier[i]);

            return { t, msg, quantMsg, quantNoise, carrier, pilot, modulatedWithPilot, modulatedWithoutPilot };
        }

        let chart1 = null;
        let chart2 = null;
        let chart3 = null;
        function plot() {
            const ctx1 = document.getElementById('modulationChart');
            const ctx2 = document.getElementById('modulationChartNoPilot');
            const ctx3 = document.getElementById('quantizationChart');
            if (!ctx1 || !ctx2 || !ctx1.getContext || !ctx2.getContext) return;
            const { t, msg, quantMsg, quantNoise, carrier, pilot, modulatedWithPilot, modulatedWithoutPilot } = generateSignals();
            const labels = t.map(time => time.toFixed(4));

            if (chart1) chart1.destroy();
            if (chart2) chart2.destroy();
            if (chart3) chart3.destroy();

            chart1 = new Chart(ctx1.getContext('2d'), {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Message', data: msg, borderColor: 'blue', fill: false, pointRadius: 0 },
                        { label: 'Carrier', data: carrier, borderColor: 'green', fill: false, pointRadius: 0 },
                        { label: 'Pilot', data: pilot, borderColor: 'orange', fill: false, pointRadius: 0 },
                        { label: 'Modulated (With Pilot)', data: modulatedWithPilot, borderColor: 'red', fill: false, pointRadius: 0 }
                    ]
                },
                options: {
                    animation: false,
                    elements: { line: { tension: 0 } },
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { x: { display: false }, y: { min: -2, max: 2 } }
                }
            });

            chart2 = new Chart(ctx2.getContext('2d'), {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Modulated (Without Pilot)', data: modulatedWithoutPilot, borderColor: 'purple', fill: false, pointRadius: 0 }
                    ]
                },
                options: {
                    animation: false,
                    elements: { line: { tension: 0 } },
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { x: { display: false }, y: { min: -2, max: 2 } }
                }
            });

            if (ctx3 && ctx3.getContext) {
                chart3 = new Chart(ctx3.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [
                            { label: 'Original Message', data: msg, borderColor: 'blue', fill: false, pointRadius: 0 },
                            { label: 'Quantized Message', data: quantMsg, borderColor: 'orange', fill: false, pointRadius: 0 },
                            { label: 'Quantization Noise', data: quantNoise, borderColor: 'red', fill: false, pointRadius: 0 }
                        ]
                    },
                    options: {
                        animation: false,
                        elements: { line: { tension: 0 } },
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: { x: { display: false }, y: { min: -1.2, max: 1.2 } }
                    }
                });
            }
        }

        if (carrierFreq && pilotFreq && msgFreq && quantBits) {
            carrierFreq.oninput = pilotFreq.oninput = msgFreq.oninput = quantBits.oninput = function() {
                updateLabels();
                plot();
            };
            updateLabels();
            setTimeout(plot, 200);
        }
        updateMathCalculations();

        // Topic filter logic
        const topicFilter = document.getElementById('topicFilter');
        const topicSections = {
            modulation: [document.getElementById('presentationSection'), document.getElementById('demoPanel'), document.getElementById('exampleSection')],
            quantization: [document.getElementById('demoPanel'), document.getElementById('quantQuizSection')],
            quiz: [document.getElementById('quizSection'), document.getElementById('quantQuizSection')],
            math: [document.getElementById('mathSection')],
            references: [document.getElementById('referencesSection')]
        };
        function showSectionsForTopic(topic) {
            // Hide all topic sections
            document.querySelectorAll('section, .demo-panel').forEach(sec => sec.style.display = 'none');
            if (topic === 'all') {
                document.querySelectorAll('section, .demo-panel').forEach(sec => sec.style.display = '');
            } else {
                (topicSections[topic] || []).forEach(sec => { if (sec) sec.style.display = ''; });
            }
        }
        topicFilter.addEventListener('change', function() {
            showSectionsForTopic(this.value);
        });
        // Show all by default
        showSectionsForTopic('all');
    });
</script>

</body>
</html>
